import{createPinia as e,defineStore as t,storeToRefs as n}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{klona as s}from'https://testingcf.jsdelivr.net/npm/klona/+esm';import{default as r}from'https://testingcf.jsdelivr.net/npm/dedent/+esm';var i={469:()=>{let e=SillyTavern.getCurrentChatId();eventOn(tavern_events.CHAT_CHANGED,t=>{e!==t&&(e=t,window.location.reload())})},497:()=>{eventOn(tavern_events.MESSAGE_UPDATED,e=>{toastr.error(`谁让你动我第 ${e} 楼消息的😡`,'干什么!')})},508:()=>{$(()=>{replaceScriptButtons([{name:'晚上好',visible:!0}]),eventOn(getButtonEvent('晚上好'),()=>{toastr.warning('晚安, 络络')})})},878:()=>{$(()=>{toastr.success('你已经成功加载示例脚本!','恭喜你!')}),$(window).on('pagehide',()=>{toastr.info('你已经卸载示例脚本!','再见!')})}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return i[e](n,n.exports,o),n.exports}o(878),o(508),o(497),o(469);const l=Vue,c=z,d=c.z.object({button_selected:c.z.boolean().default(!1)}).prefault({}),p=t('settings',()=>{const e=(0,l.ref)(d.parse(getVariables({type:'script',script_id:getScriptId()})));return(0,l.watch)(e,e=>{insertOrAssignVariables(s(e),{type:'script',script_id:getScriptId()})},{immediate:!0,deep:!0}),{settings:e}}),m={class:'example-extension-settings'},u={class:'inline-drawer'},v={class:'inline-drawer-content'},g={class:'example-extension_block flex-container'},f=(0,l.defineComponent)({__name:'设置界面',setup(e){const{settings:t}=n(p()),s=()=>{toastr.success('你好呀!')};return(e,n)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',m,[(0,l.createElementVNode)('div',u,[n[3]||(n[3]=(0,l.createElementVNode)('div',{class:'inline-drawer-toggle inline-drawer-header'},[(0,l.createElementVNode)('b',null,(0,l.toDisplayString)('脚本示例')),(0,l.createElementVNode)('div',{class:'inline-drawer-icon fa-solid fa-circle-chevron-down down'})],-1)),(0,l.createElementVNode)('div',v,[(0,l.createElementVNode)('div',{class:'example-extension_block flex-container'},[(0,l.createElementVNode)('input',{class:'menu_button',type:'submit',value:'示例按钮',onClick:s})]),(0,l.createElementVNode)('div',g,[(0,l.withDirectives)((0,l.createElementVNode)('input',{'onUpdate:modelValue':n[0]||(n[0]=e=>(0,l.unref)(t).button_selected=e),type:'checkbox'},null,512),[[l.vModelCheckbox,(0,l.unref)(t).button_selected]]),n[1]||(n[1]=(0,l.createElementVNode)('label',{for:'example_setting'},(0,l.toDisplayString)('示例开关'),-1))]),n[2]||(n[2]=(0,l.createElementVNode)('hr',{class:'sysHR'},null,-1))])])]))}}),h=(0,l.createApp)(f).use(e());$(()=>{const e=$('<div>').attr('script_id',getScriptId());$('#extensions_settings2').append(e),function(){if($(`head > div[script_id="${getScriptId()}"]`).length>0)return;const e=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone());$('head').append(e)}(),h.mount(e[0])}),$(window).on('pagehide',()=>{h.unmount(),$(`head > div[script_id="${getScriptId()}"]`).remove(),$(`div[script_id="${getScriptId()}"]`).remove()}),$(async()=>{0===getLastMessageId()&&await createChatMessages([{role:'assistant',message:r('\n                   [查看日记: 这是第二次看我的日记了呢~]\n                   <roleplay_options>\n                   接受日记本并翻阅: 青空黎接过她递来的粉色日记本，在天台阳光下缓缓翻开第一页\n                   保持沉默盯着她看: 青空黎没有接本子，只是盯着她略显紧张的表情和轻颤的声音\n                   坐到她身边: 青空黎没有立刻回应，而是缓缓走到络络身边坐下，等待她自己继续说\n                   开玩笑化解气氛: 青空黎微微一笑，开玩笑地说「所以，是要让我当监督官啦？」\n                   跳过时间: 青空黎接过日记本，安静地翻了几页，时间悄然流逝至黄昏深处\n                   和络络聊天: 青空黎试探性地问：「这本是从哪天开始写的？都写些什么呀？」\n                   </roleplay_options>\n                 ')},{role:'assistant',message:r('\n                   [查看日记: 真是的, 就这么喜欢看吗(v〃ω〃)]\n                   <roleplay_options>\n                   阅读日记第一页：青空黎打开粉色的日记本，从第一页开始认真阅读络络的记录内容。\n                   问她封面上的兔子贴纸：青空黎好奇那枚蓝色兔子贴纸的来历，转头向络络询问。\n                   观察络络的小动作：青空黎不急着翻开日记，而是注意到络络表情里一丝期待与不安。\n                   和她闲聊天气：青空黎随口聊起傍晚风有点凉，试图舒缓紧张气氛。\n                   调侃她：“有哪页是‘不许看’的？”青空黎轻松地试图化解她的小慌乱。\n                   转身回教室：青空黎接过日记却并未立刻翻开，而是表示回教室再看，打算慢慢阅读。\n                   </roleplay_options>\n                 ')}],{refresh:'all'})});
//# sourceMappingURL=index.js.map